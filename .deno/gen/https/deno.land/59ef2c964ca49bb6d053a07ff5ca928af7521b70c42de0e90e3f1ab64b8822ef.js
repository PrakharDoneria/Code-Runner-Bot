// === Needed imports
import { basename } from "https://deno.land/std@0.211.0/path/basename.ts";
import { debug as d, isDeno } from "./platform.deno.ts";
const debug = d("grammy:warn");
// === Export all API types
export * from "https://deno.land/x/grammy_types@v3.14.0/mod.ts";
// === InputFile handling and File augmenting
/**
 * An `InputFile` wraps a number of different sources for [sending
 * files](https://grammy.dev/guide/files#uploading-your-own-files).
 *
 * It corresponds to the `InputFile` type in the [Telegram Bot API
 * Reference](https://core.telegram.org/bots/api#inputfile).
 */ export class InputFile {
  consumed = false;
  fileData;
  /**
     * Optional name of the constructed `InputFile` instance.
     *
     * Check out the
     * [documentation](https://grammy.dev/guide/files#uploading-your-own-files)
     * on sending files with `InputFile`.
     */ filename;
  /**
     * Constructs an `InputFile` that can be used in the API to send files.
     *
     * @param file A path to a local file or a `Buffer` or a `ReadableStream` that specifies the file data
     * @param filename Optional name of the file
     */ constructor(file, filename){
    this.fileData = file;
    filename ??= this.guessFilename(file);
    this.filename = filename;
    if (typeof file === "string" && (file.startsWith("http:") || file.startsWith("https:"))) {
      debug(`InputFile received the local file path '${file}' that looks like a URL. Is this a mistake?`);
    }
  }
  guessFilename(file) {
    if (typeof file === "string") return basename(file);
    if ("url" in file) return basename(file.url);
    if (!(file instanceof URL)) return undefined;
    if (file.pathname !== "/") {
      const filename = basename(file.pathname);
      if (filename) return filename;
    }
    return basename(file.hostname);
  }
  /**
     * Internal method. Do not use.
     *
     * Converts this instance into a binary representation that can be sent to
     * the Bot API server in the request body.
     */ async toRaw() {
    if (this.consumed) {
      throw new Error("Cannot reuse InputFile data source!");
    }
    const data = this.fileData;
    // Handle local files
    if (typeof data === "string") {
      if (!isDeno) {
        throw new Error("Reading files by path requires a Deno environment");
      }
      const file = await Deno.open(data);
      return file.readable[Symbol.asyncIterator]();
    }
    if (data instanceof Blob) return data.stream();
    if (isDenoFile(data)) return data.readable[Symbol.asyncIterator]();
    // Handle Response objects
    if (data instanceof Response) {
      if (data.body === null) throw new Error(`No response body!`);
      return data.body;
    }
    // Handle URL and URLLike objects
    if (data instanceof URL) return await fetchFile(data);
    if ("url" in data) return await fetchFile(data.url);
    // Return buffers as-is
    if (data instanceof Uint8Array) return data;
    // Unwrap supplier functions
    if (typeof data === "function") {
      return new InputFile(await data()).toRaw();
    }
    // Mark streams and iterators as consumed and return them as-is
    this.consumed = true;
    return data;
  }
}
async function fetchFile(url) {
  const { body } = await fetch(url);
  if (body === null) {
    throw new Error(`Download failed, no response body from '${url}'`);
  }
  return body[Symbol.asyncIterator]();
}
function isDenoFile(data) {
  return isDeno && data instanceof Deno.FsFile;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZ3JhbW15QHYxLjMwLjAvdHlwZXMuZGVuby50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT0gTmVlZGVkIGltcG9ydHNcbmltcG9ydCB7IGJhc2VuYW1lIH0gZnJvbSBcImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjIxMS4wL3BhdGgvYmFzZW5hbWUudHNcIjtcblxuaW1wb3J0IHtcbiAgICB0eXBlIEFwaU1ldGhvZHMgYXMgQXBpTWV0aG9kc0YsXG4gICAgdHlwZSBJbnB1dE1lZGlhIGFzIElucHV0TWVkaWFGLFxuICAgIHR5cGUgSW5wdXRNZWRpYUFuaW1hdGlvbiBhcyBJbnB1dE1lZGlhQW5pbWF0aW9uRixcbiAgICB0eXBlIElucHV0TWVkaWFBdWRpbyBhcyBJbnB1dE1lZGlhQXVkaW9GLFxuICAgIHR5cGUgSW5wdXRNZWRpYURvY3VtZW50IGFzIElucHV0TWVkaWFEb2N1bWVudEYsXG4gICAgdHlwZSBJbnB1dE1lZGlhUGhvdG8gYXMgSW5wdXRNZWRpYVBob3RvRixcbiAgICB0eXBlIElucHV0TWVkaWFWaWRlbyBhcyBJbnB1dE1lZGlhVmlkZW9GLFxuICAgIHR5cGUgSW5wdXRQYWlkTWVkaWEgYXMgSW5wdXRQYWlkTWVkaWFGLFxuICAgIHR5cGUgSW5wdXRQYWlkTWVkaWFQaG90byBhcyBJbnB1dFBhaWRNZWRpYVBob3RvRixcbiAgICB0eXBlIElucHV0UGFpZE1lZGlhVmlkZW8gYXMgSW5wdXRQYWlkTWVkaWFWaWRlb0YsXG4gICAgdHlwZSBJbnB1dFN0aWNrZXIgYXMgSW5wdXRTdGlja2VyRixcbiAgICB0eXBlIE9wdHMgYXMgT3B0c0YsXG59IGZyb20gXCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teV90eXBlc0B2My4xNC4wL21vZC50c1wiO1xuaW1wb3J0IHsgZGVidWcgYXMgZCwgaXNEZW5vIH0gZnJvbSBcIi4vcGxhdGZvcm0uZGVuby50c1wiO1xuXG5jb25zdCBkZWJ1ZyA9IGQoXCJncmFtbXk6d2FyblwiKTtcblxuLy8gPT09IEV4cG9ydCBhbGwgQVBJIHR5cGVzXG5leHBvcnQgKiBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQveC9ncmFtbXlfdHlwZXNAdjMuMTQuMC9tb2QudHNcIjtcblxuLyoqIEEgdmFsdWUsIG9yIGEgcG90ZW50aWFsbHkgYXN5bmMgZnVuY3Rpb24gc3VwcGx5aW5nIHRoYXQgdmFsdWUgKi9cbnR5cGUgTWF5YmVTdXBwbGllcjxUPiA9IFQgfCAoKCkgPT4gVCB8IFByb21pc2U8VD4pO1xuLyoqIFNvbWV0aGluZyB0aGF0IGxvb2tzIGxpa2UgYSBVUkwuICovXG5pbnRlcmZhY2UgVVJMTGlrZSB7XG4gICAgLyoqXG4gICAgICogSWRlbnRpZmllciBvZiB0aGUgcmVzb3VyY2UuIE11c3QgYmUgaW4gYSBmb3JtYXQgdGhhdCBjYW4gYmUgcGFyc2VkIGJ5IHRoZVxuICAgICAqIFVSTCBjb25zdHJ1Y3Rvci5cbiAgICAgKi9cbiAgICB1cmw6IHN0cmluZztcbn1cblxuLy8gPT09IElucHV0RmlsZSBoYW5kbGluZyBhbmQgRmlsZSBhdWdtZW50aW5nXG4vKipcbiAqIEFuIGBJbnB1dEZpbGVgIHdyYXBzIGEgbnVtYmVyIG9mIGRpZmZlcmVudCBzb3VyY2VzIGZvciBbc2VuZGluZ1xuICogZmlsZXNdKGh0dHBzOi8vZ3JhbW15LmRldi9ndWlkZS9maWxlcyN1cGxvYWRpbmcteW91ci1vd24tZmlsZXMpLlxuICpcbiAqIEl0IGNvcnJlc3BvbmRzIHRvIHRoZSBgSW5wdXRGaWxlYCB0eXBlIGluIHRoZSBbVGVsZWdyYW0gQm90IEFQSVxuICogUmVmZXJlbmNlXShodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2lucHV0ZmlsZSkuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEZpbGUge1xuICAgIHByaXZhdGUgY29uc3VtZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZpbGVEYXRhOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIElucHV0RmlsZT5bMF07XG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwgbmFtZSBvZiB0aGUgY29uc3RydWN0ZWQgYElucHV0RmlsZWAgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBDaGVjayBvdXQgdGhlXG4gICAgICogW2RvY3VtZW50YXRpb25dKGh0dHBzOi8vZ3JhbW15LmRldi9ndWlkZS9maWxlcyN1cGxvYWRpbmcteW91ci1vd24tZmlsZXMpXG4gICAgICogb24gc2VuZGluZyBmaWxlcyB3aXRoIGBJbnB1dEZpbGVgLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBmaWxlbmFtZT86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGFuIGBJbnB1dEZpbGVgIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIEFQSSB0byBzZW5kIGZpbGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbGUgQSBwYXRoIHRvIGEgbG9jYWwgZmlsZSBvciBhIGBCdWZmZXJgIG9yIGEgYFJlYWRhYmxlU3RyZWFtYCB0aGF0IHNwZWNpZmllcyB0aGUgZmlsZSBkYXRhXG4gICAgICogQHBhcmFtIGZpbGVuYW1lIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGZpbGVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZmlsZTogTWF5YmVTdXBwbGllcjxcbiAgICAgICAgICAgIHwgc3RyaW5nXG4gICAgICAgICAgICB8IEJsb2JcbiAgICAgICAgICAgIHwgRGVuby5Gc0ZpbGVcbiAgICAgICAgICAgIHwgUmVzcG9uc2VcbiAgICAgICAgICAgIHwgVVJMXG4gICAgICAgICAgICB8IFVSTExpa2VcbiAgICAgICAgICAgIHwgVWludDhBcnJheVxuICAgICAgICAgICAgfCBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PlxuICAgICAgICAgICAgfCBJdGVyYWJsZTxVaW50OEFycmF5PlxuICAgICAgICAgICAgfCBBc3luY0l0ZXJhYmxlPFVpbnQ4QXJyYXk+XG4gICAgICAgID4sXG4gICAgICAgIGZpbGVuYW1lPzogc3RyaW5nLFxuICAgICkge1xuICAgICAgICB0aGlzLmZpbGVEYXRhID0gZmlsZTtcbiAgICAgICAgZmlsZW5hbWUgPz89IHRoaXMuZ3Vlc3NGaWxlbmFtZShmaWxlKTtcbiAgICAgICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgKGZpbGUuc3RhcnRzV2l0aChcImh0dHA6XCIpIHx8IGZpbGUuc3RhcnRzV2l0aChcImh0dHBzOlwiKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcbiAgICAgICAgICAgICAgICBgSW5wdXRGaWxlIHJlY2VpdmVkIHRoZSBsb2NhbCBmaWxlIHBhdGggJyR7ZmlsZX0nIHRoYXQgbG9va3MgbGlrZSBhIFVSTC4gSXMgdGhpcyBhIG1pc3Rha2U/YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBndWVzc0ZpbGVuYW1lKFxuICAgICAgICBmaWxlOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIElucHV0RmlsZT5bMF0sXG4gICAgKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSByZXR1cm4gYmFzZW5hbWUoZmlsZSk7XG4gICAgICAgIGlmIChcInVybFwiIGluIGZpbGUpIHJldHVybiBiYXNlbmFtZShmaWxlLnVybCk7XG4gICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBVUkwpKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoZmlsZS5wYXRobmFtZSAhPT0gXCIvXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYmFzZW5hbWUoZmlsZS5wYXRobmFtZSk7XG4gICAgICAgICAgICBpZiAoZmlsZW5hbWUpIHJldHVybiBmaWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzZW5hbWUoZmlsZS5ob3N0bmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZC4gRG8gbm90IHVzZS5cbiAgICAgKlxuICAgICAqIENvbnZlcnRzIHRoaXMgaW5zdGFuY2UgaW50byBhIGJpbmFyeSByZXByZXNlbnRhdGlvbiB0aGF0IGNhbiBiZSBzZW50IHRvXG4gICAgICogdGhlIEJvdCBBUEkgc2VydmVyIGluIHRoZSByZXF1ZXN0IGJvZHkuXG4gICAgICovXG4gICAgYXN5bmMgdG9SYXcoKTogUHJvbWlzZTxcbiAgICAgICAgVWludDhBcnJheSB8IEl0ZXJhYmxlPFVpbnQ4QXJyYXk+IHwgQXN5bmNJdGVyYWJsZTxVaW50OEFycmF5PlxuICAgID4ge1xuICAgICAgICBpZiAodGhpcy5jb25zdW1lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJldXNlIElucHV0RmlsZSBkYXRhIHNvdXJjZSFcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZmlsZURhdGE7XG4gICAgICAgIC8vIEhhbmRsZSBsb2NhbCBmaWxlc1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmICghaXNEZW5vKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBcIlJlYWRpbmcgZmlsZXMgYnkgcGF0aCByZXF1aXJlcyBhIERlbm8gZW52aXJvbm1lbnRcIixcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IERlbm8ub3BlbihkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiBmaWxlLnJlYWRhYmxlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQmxvYikgcmV0dXJuIGRhdGEuc3RyZWFtKCk7XG4gICAgICAgIGlmIChpc0Rlbm9GaWxlKGRhdGEpKSByZXR1cm4gZGF0YS5yZWFkYWJsZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICAgICAgLy8gSGFuZGxlIFJlc3BvbnNlIG9iamVjdHNcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuYm9keSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKGBObyByZXNwb25zZSBib2R5IWApO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuYm9keTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIYW5kbGUgVVJMIGFuZCBVUkxMaWtlIG9iamVjdHNcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVUkwpIHJldHVybiBhd2FpdCBmZXRjaEZpbGUoZGF0YSk7XG4gICAgICAgIGlmIChcInVybFwiIGluIGRhdGEpIHJldHVybiBhd2FpdCBmZXRjaEZpbGUoZGF0YS51cmwpO1xuICAgICAgICAvLyBSZXR1cm4gYnVmZmVycyBhcy1pc1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBkYXRhO1xuICAgICAgICAvLyBVbndyYXAgc3VwcGxpZXIgZnVuY3Rpb25zXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IElucHV0RmlsZShhd2FpdCBkYXRhKCkpLnRvUmF3KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFyayBzdHJlYW1zIGFuZCBpdGVyYXRvcnMgYXMgY29uc3VtZWQgYW5kIHJldHVybiB0aGVtIGFzLWlzXG4gICAgICAgIHRoaXMuY29uc3VtZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoRmlsZShcbiAgICB1cmw6IHN0cmluZyB8IFVSTCxcbik6IFByb21pc2U8QXN5bmNJdGVyYWJsZTxVaW50OEFycmF5Pj4ge1xuICAgIGNvbnN0IHsgYm9keSB9ID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoYm9keSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERvd25sb2FkIGZhaWxlZCwgbm8gcmVzcG9uc2UgYm9keSBmcm9tICcke3VybH0nYCk7XG4gICAgfVxuICAgIHJldHVybiBib2R5W1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xufVxuZnVuY3Rpb24gaXNEZW5vRmlsZShkYXRhOiB1bmtub3duKTogZGF0YSBpcyBEZW5vLkZzRmlsZSB7XG4gICAgcmV0dXJuIGlzRGVubyAmJiBkYXRhIGluc3RhbmNlb2YgRGVuby5Gc0ZpbGU7XG59XG5cbi8vID09PSBFeHBvcnQgSW5wdXRGaWxlIHR5cGVzXG4vKiogV3JhcHBlciB0eXBlIHRvIGJ1bmRsZSBhbGwgbWV0aG9kcyBvZiB0aGUgVGVsZWdyYW0gQVBJICovXG5leHBvcnQgdHlwZSBBcGlNZXRob2RzID0gQXBpTWV0aG9kc0Y8SW5wdXRGaWxlPjtcblxuLyoqIFV0aWxpdHkgdHlwZSBwcm92aWRpbmcgdGhlIGFyZ3VtZW50IHR5cGUgZm9yIHRoZSBnaXZlbiBtZXRob2QgbmFtZSBvciBge31gIGlmIHRoZSBtZXRob2QgZG9lcyBub3QgdGFrZSBhbnkgcGFyYW1ldGVycyAqL1xuZXhwb3J0IHR5cGUgT3B0czxNIGV4dGVuZHMga2V5b2YgQXBpTWV0aG9kcz4gPSBPcHRzRjxJbnB1dEZpbGU+W01dO1xuXG4vKiogVGhpcyBvYmplY3QgZGVzY3JpYmVzIGEgc3RpY2tlciB0byBiZSBhZGRlZCB0byBhIHN0aWNrZXIgc2V0LiAqL1xuZXhwb3J0IHR5cGUgSW5wdXRTdGlja2VyID0gSW5wdXRTdGlja2VyRjxJbnB1dEZpbGU+O1xuXG4vKiogVGhpcyBvYmplY3QgcmVwcmVzZW50cyB0aGUgY29udGVudCBvZiBhIG1lZGlhIG1lc3NhZ2UgdG8gYmUgc2VudC4gSXQgc2hvdWxkIGJlIG9uZSBvZlxuLSBJbnB1dE1lZGlhQW5pbWF0aW9uXG4tIElucHV0TWVkaWFEb2N1bWVudFxuLSBJbnB1dE1lZGlhQXVkaW9cbi0gSW5wdXRNZWRpYVBob3RvXG4tIElucHV0TWVkaWFWaWRlbyAqL1xuZXhwb3J0IHR5cGUgSW5wdXRNZWRpYSA9IElucHV0TWVkaWFGPElucHV0RmlsZT47XG4vKiogUmVwcmVzZW50cyBhIHBob3RvIHRvIGJlIHNlbnQuICovXG5leHBvcnQgdHlwZSBJbnB1dE1lZGlhUGhvdG8gPSBJbnB1dE1lZGlhUGhvdG9GPElucHV0RmlsZT47XG4vKiogUmVwcmVzZW50cyBhIHZpZGVvIHRvIGJlIHNlbnQuICovXG5leHBvcnQgdHlwZSBJbnB1dE1lZGlhVmlkZW8gPSBJbnB1dE1lZGlhVmlkZW9GPElucHV0RmlsZT47XG4vKiogUmVwcmVzZW50cyBhbiBhbmltYXRpb24gZmlsZSAoR0lGIG9yIEguMjY0L01QRUctNCBBVkMgdmlkZW8gd2l0aG91dCBzb3VuZCkgdG8gYmUgc2VudC4gKi9cbmV4cG9ydCB0eXBlIElucHV0TWVkaWFBbmltYXRpb24gPSBJbnB1dE1lZGlhQW5pbWF0aW9uRjxJbnB1dEZpbGU+O1xuLyoqIFJlcHJlc2VudHMgYW4gYXVkaW8gZmlsZSB0byBiZSB0cmVhdGVkIGFzIG11c2ljIHRvIGJlIHNlbnQuICovXG5leHBvcnQgdHlwZSBJbnB1dE1lZGlhQXVkaW8gPSBJbnB1dE1lZGlhQXVkaW9GPElucHV0RmlsZT47XG4vKiogUmVwcmVzZW50cyBhIGdlbmVyYWwgZmlsZSB0byBiZSBzZW50LiAqL1xuZXhwb3J0IHR5cGUgSW5wdXRNZWRpYURvY3VtZW50ID0gSW5wdXRNZWRpYURvY3VtZW50RjxJbnB1dEZpbGU+O1xuLyoqIFRoaXMgb2JqZWN0IGRlc2NyaWJlcyB0aGUgcGFpZCBtZWRpYSB0byBiZSBzZW50LiBDdXJyZW50bHksIGl0IGNhbiBiZSBvbmUgb2Zcbi0gSW5wdXRQYWlkTWVkaWFQaG90b1xuLSBJbnB1dFBhaWRNZWRpYVZpZGVvICovXG5leHBvcnQgdHlwZSBJbnB1dFBhaWRNZWRpYSA9IElucHV0UGFpZE1lZGlhRjxJbnB1dEZpbGU+O1xuLyoqIFRoZSBwYWlkIG1lZGlhIHRvIHNlbmQgaXMgYSBwaG90by4gKi9cbmV4cG9ydCB0eXBlIElucHV0UGFpZE1lZGlhUGhvdG8gPSBJbnB1dFBhaWRNZWRpYVBob3RvRjxJbnB1dEZpbGU+O1xuLyoqIFRoZSBwYWlkIG1lZGlhIHRvIHNlbmQgaXMgYSB2aWRlby4gKi9cbmV4cG9ydCB0eXBlIElucHV0UGFpZE1lZGlhVmlkZW8gPSBJbnB1dFBhaWRNZWRpYVZpZGVvRjxJbnB1dEZpbGU+O1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHFCQUFxQjtBQUNyQixTQUFTLFFBQVEsUUFBUSxpREFBaUQ7QUFnQjFFLFNBQVMsU0FBUyxDQUFDLEVBQUUsTUFBTSxRQUFRLHFCQUFxQjtBQUV4RCxNQUFNLFFBQVEsRUFBRTtBQUVoQiwyQkFBMkI7QUFDM0IsY0FBYyxrREFBa0Q7QUFhaEUsNkNBQTZDO0FBQzdDOzs7Ozs7Q0FNQyxHQUNELE9BQU8sTUFBTTtFQUNELFdBQVcsTUFBTTtFQUNSLFNBQXFEO0VBQ3RFOzs7Ozs7S0FNQyxHQUNELEFBQWdCLFNBQWtCO0VBQ2xDOzs7OztLQUtDLEdBQ0QsWUFDSSxJQVdDLEVBQ0QsUUFBaUIsQ0FDbkI7SUFDRSxJQUFJLENBQUMsUUFBUSxHQUFHO0lBQ2hCLGFBQWEsSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUNoQyxJQUFJLENBQUMsUUFBUSxHQUFHO0lBQ2hCLElBQ0ksT0FBTyxTQUFTLFlBQ2hCLENBQUMsS0FBSyxVQUFVLENBQUMsWUFBWSxLQUFLLFVBQVUsQ0FBQyxTQUFTLEdBQ3hEO01BQ0UsTUFDSSxDQUFDLHdDQUF3QyxFQUFFLEtBQUssMkNBQTJDLENBQUM7SUFFcEc7RUFDSjtFQUNRLGNBQ0osSUFBZ0QsRUFDOUI7SUFDbEIsSUFBSSxPQUFPLFNBQVMsVUFBVSxPQUFPLFNBQVM7SUFDOUMsSUFBSSxTQUFTLE1BQU0sT0FBTyxTQUFTLEtBQUssR0FBRztJQUMzQyxJQUFJLENBQUMsQ0FBQyxnQkFBZ0IsR0FBRyxHQUFHLE9BQU87SUFDbkMsSUFBSSxLQUFLLFFBQVEsS0FBSyxLQUFLO01BQ3ZCLE1BQU0sV0FBVyxTQUFTLEtBQUssUUFBUTtNQUN2QyxJQUFJLFVBQVUsT0FBTztJQUN6QjtJQUNBLE9BQU8sU0FBUyxLQUFLLFFBQVE7RUFDakM7RUFDQTs7Ozs7S0FLQyxHQUNELE1BQU0sUUFFSjtJQUNFLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtNQUNmLE1BQU0sSUFBSSxNQUFNO0lBQ3BCO0lBQ0EsTUFBTSxPQUFPLElBQUksQ0FBQyxRQUFRO0lBQzFCLHFCQUFxQjtJQUNyQixJQUFJLE9BQU8sU0FBUyxVQUFVO01BQzFCLElBQUksQ0FBQyxRQUFRO1FBQ1QsTUFBTSxJQUFJLE1BQ047TUFFUjtNQUNBLE1BQU0sT0FBTyxNQUFNLEtBQUssSUFBSSxDQUFDO01BQzdCLE9BQU8sS0FBSyxRQUFRLENBQUMsT0FBTyxhQUFhLENBQUM7SUFDOUM7SUFDQSxJQUFJLGdCQUFnQixNQUFNLE9BQU8sS0FBSyxNQUFNO0lBQzVDLElBQUksV0FBVyxPQUFPLE9BQU8sS0FBSyxRQUFRLENBQUMsT0FBTyxhQUFhLENBQUM7SUFDaEUsMEJBQTBCO0lBQzFCLElBQUksZ0JBQWdCLFVBQVU7TUFDMUIsSUFBSSxLQUFLLElBQUksS0FBSyxNQUFNLE1BQU0sSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUM7TUFDM0QsT0FBTyxLQUFLLElBQUk7SUFDcEI7SUFDQSxpQ0FBaUM7SUFDakMsSUFBSSxnQkFBZ0IsS0FBSyxPQUFPLE1BQU0sVUFBVTtJQUNoRCxJQUFJLFNBQVMsTUFBTSxPQUFPLE1BQU0sVUFBVSxLQUFLLEdBQUc7SUFDbEQsdUJBQXVCO0lBQ3ZCLElBQUksZ0JBQWdCLFlBQVksT0FBTztJQUN2Qyw0QkFBNEI7SUFDNUIsSUFBSSxPQUFPLFNBQVMsWUFBWTtNQUM1QixPQUFPLElBQUksVUFBVSxNQUFNLFFBQVEsS0FBSztJQUM1QztJQUNBLCtEQUErRDtJQUMvRCxJQUFJLENBQUMsUUFBUSxHQUFHO0lBQ2hCLE9BQU87RUFDWDtBQUNKO0FBRUEsZUFBZSxVQUNYLEdBQWlCO0VBRWpCLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFNLE1BQU07RUFDN0IsSUFBSSxTQUFTLE1BQU07SUFDZixNQUFNLElBQUksTUFBTSxDQUFDLHdDQUF3QyxFQUFFLElBQUksQ0FBQyxDQUFDO0VBQ3JFO0VBQ0EsT0FBTyxJQUFJLENBQUMsT0FBTyxhQUFhLENBQUM7QUFDckM7QUFDQSxTQUFTLFdBQVcsSUFBYTtFQUM3QixPQUFPLFVBQVUsZ0JBQWdCLEtBQUssTUFBTTtBQUNoRCJ9