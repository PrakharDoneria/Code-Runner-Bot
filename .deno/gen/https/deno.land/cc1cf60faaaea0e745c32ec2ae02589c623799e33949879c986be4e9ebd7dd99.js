// deno-lint-ignore-file no-explicit-any
import { debug as d, defaultAdapter } from "../platform.deno.ts";
import { adapters as nativeAdapters } from "./frameworks.ts";
const debugErr = d("grammy:error");
const callbackAdapter = (update, callback, header, unauthorized = ()=>callback('"unauthorized"'))=>({
    update: Promise.resolve(update),
    respond: callback,
    header,
    unauthorized
  });
const adapters = {
  ...nativeAdapters,
  callback: callbackAdapter
};
export function webhookCallback(bot, adapter = defaultAdapter, onTimeout, timeoutMilliseconds, secretToken) {
  const { onTimeout: timeout = "throw", timeoutMilliseconds: ms = 10_000, secretToken: token } = typeof onTimeout === "object" ? onTimeout : {
    onTimeout,
    timeoutMilliseconds,
    secretToken
  };
  let initialized = false;
  const server = typeof adapter === "string" ? adapters[adapter] : adapter;
  return async (...args)=>{
    const { update, respond, unauthorized, end, handlerReturn, header } = server(...args);
    if (!initialized) {
      // Will dedupe concurrently incoming calls from several updates
      await bot.init();
      initialized = true;
    }
    if (header !== token) {
      await unauthorized();
      // TODO: investigate deno bug that happens when this console logging is removed
      console.log(handlerReturn);
      return handlerReturn;
    }
    let usedWebhookReply = false;
    const webhookReplyEnvelope = {
      async send (json) {
        usedWebhookReply = true;
        await respond(json);
      }
    };
    await timeoutIfNecessary(bot.handleUpdate(await update, webhookReplyEnvelope), typeof timeout === "function" ? ()=>timeout(...args) : timeout, ms);
    if (!usedWebhookReply) end?.();
    return handlerReturn;
  };
}
function timeoutIfNecessary(task, onTimeout, timeout) {
  if (timeout === Infinity) return task;
  return new Promise((resolve, reject)=>{
    const handle = setTimeout(()=>{
      debugErr(`Request timed out after ${timeout} ms`);
      if (onTimeout === "throw") {
        reject(new Error(`Request timed out after ${timeout} ms`));
      } else {
        if (typeof onTimeout === "function") onTimeout();
        resolve();
      }
      const now = Date.now();
      task.finally(()=>{
        const diff = Date.now() - now;
        debugErr(`Request completed ${diff} ms after timeout!`);
      });
    }, timeout);
    task.then(resolve).catch(reject).finally(()=>clearTimeout(handle));
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZ3JhbW15QHYxLjMwLjAvY29udmVuaWVuY2Uvd2ViaG9vay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgbm8tZXhwbGljaXQtYW55XG5pbXBvcnQgeyB0eXBlIEJvdCB9IGZyb20gXCIuLi9ib3QudHNcIjtcbmltcG9ydCB7IHR5cGUgQ29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0LnRzXCI7XG5pbXBvcnQgeyB0eXBlIFdlYmhvb2tSZXBseUVudmVsb3BlIH0gZnJvbSBcIi4uL2NvcmUvY2xpZW50LnRzXCI7XG5pbXBvcnQgeyBkZWJ1ZyBhcyBkLCBkZWZhdWx0QWRhcHRlciB9IGZyb20gXCIuLi9wbGF0Zm9ybS5kZW5vLnRzXCI7XG5pbXBvcnQgeyB0eXBlIFVwZGF0ZSB9IGZyb20gXCIuLi90eXBlcy50c1wiO1xuaW1wb3J0IHtcbiAgICBhZGFwdGVycyBhcyBuYXRpdmVBZGFwdGVycyxcbiAgICB0eXBlIEZyYW1ld29ya0FkYXB0ZXIsXG59IGZyb20gXCIuL2ZyYW1ld29ya3MudHNcIjtcbmNvbnN0IGRlYnVnRXJyID0gZChcImdyYW1teTplcnJvclwiKTtcblxuY29uc3QgY2FsbGJhY2tBZGFwdGVyOiBGcmFtZXdvcmtBZGFwdGVyID0gKFxuICAgIHVwZGF0ZTogVXBkYXRlLFxuICAgIGNhbGxiYWNrOiAoanNvbjogc3RyaW5nKSA9PiB1bmtub3duLFxuICAgIGhlYWRlcjogc3RyaW5nLFxuICAgIHVuYXV0aG9yaXplZCA9ICgpID0+IGNhbGxiYWNrKCdcInVuYXV0aG9yaXplZFwiJyksXG4pID0+ICh7XG4gICAgdXBkYXRlOiBQcm9taXNlLnJlc29sdmUodXBkYXRlKSxcbiAgICByZXNwb25kOiBjYWxsYmFjayxcbiAgICBoZWFkZXIsXG4gICAgdW5hdXRob3JpemVkLFxufSk7XG5jb25zdCBhZGFwdGVycyA9IHsgLi4ubmF0aXZlQWRhcHRlcnMsIGNhbGxiYWNrOiBjYWxsYmFja0FkYXB0ZXIgfTtcblxuZXhwb3J0IGludGVyZmFjZSBXZWJob29rT3B0aW9ucyB7XG4gICAgLyoqIEFuIG9wdGlvbmFsIHN0cmF0ZWd5IHRvIGhhbmRsZSB0aW1lb3V0cyAoZGVmYXVsdDogJ3Rocm93JykgKi9cbiAgICBvblRpbWVvdXQ/OiBcInRocm93XCIgfCBcInJldHVyblwiIHwgKCguLi5hcmdzOiBhbnlbXSkgPT4gdW5rbm93bik7XG4gICAgLyoqIEFuIG9wdGlvbmFsIG51bWJlciBvZiB0aW1lb3V0IG1pbGxpc2Vjb25kcyAoZGVmYXVsdDogMTBfMDAwKSAqL1xuICAgIHRpbWVvdXRNaWxsaXNlY29uZHM/OiBudW1iZXI7XG4gICAgLyoqIEFuIG9wdGlvbmFsIHN0cmluZyB0byBjb21wYXJlIHRvIFgtVGVsZWdyYW0tQm90LUFwaS1TZWNyZXQtVG9rZW4gKi9cbiAgICBzZWNyZXRUb2tlbj86IHN0cmluZztcbn1cblxudHlwZSBBZGFwdGVycyA9IHR5cGVvZiBhZGFwdGVycztcbnR5cGUgQWRhcHRlck5hbWVzID0ga2V5b2YgQWRhcHRlcnM7XG50eXBlIFJlc29sdmVOYW1lPEEgZXh0ZW5kcyBGcmFtZXdvcmtBZGFwdGVyIHwgQWRhcHRlck5hbWVzPiA9IEEgZXh0ZW5kc1xuICAgIEFkYXB0ZXJOYW1lcyA/IEFkYXB0ZXJzW0FdIDogQTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB5b3UgY2FuIHBhc3MgdG8gYSB3ZWIgZnJhbWV3b3JrIChzdWNoIGFzXG4gKiBleHByZXNzKSBpZiB5b3Ugd2FudCB0byBydW4geW91ciBib3QgdmlhIHdlYmhvb2tzLiBVc2UgaXQgbGlrZSB0aGlzOlxuICogYGBgdHNcbiAqIGNvbnN0IGFwcCA9IGV4cHJlc3MoKSAvLyBvciB3aGF0ZXZlciB5b3UncmUgdXNpbmdcbiAqIGNvbnN0IGJvdCA9IG5ldyBCb3QoJzx0b2tlbj4nKVxuICpcbiAqIGFwcC51c2Uod2ViaG9va0NhbGxiYWNrKGJvdCwgJ2V4cHJlc3MnKSlcbiAqIGBgYFxuICpcbiAqIENvbmZlciB0aGUgZ3JhbW1ZXG4gKiBbZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9ncmFtbXkuZGV2L2d1aWRlL2RlcGxveW1lbnQtdHlwZXMpIHRvIHJlYWQgbW9yZVxuICogYWJvdXQgaG93IHRvIHJ1biB5b3VyIGJvdCB3aXRoIHdlYmhvb2tzLlxuICpcbiAqIEBwYXJhbSBib3QgVGhlIGJvdCBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgY2FsbGJhY2tcbiAqIEBwYXJhbSBhZGFwdGVyIEFuIG9wdGlvbmFsIHN0cmluZyBpZGVudGlmeWluZyB0aGUgZnJhbWV3b3JrIChkZWZhdWx0OiAnZXhwcmVzcycpXG4gKiBAcGFyYW0gd2ViaG9va09wdGlvbnMgRnVydGhlciBvcHRpb25zIGZvciB0aGUgd2ViaG9vayBzZXR1cFxuICovXG5leHBvcnQgZnVuY3Rpb24gd2ViaG9va0NhbGxiYWNrPFxuICAgIEMgZXh0ZW5kcyBDb250ZXh0ID0gQ29udGV4dCxcbiAgICBBIGV4dGVuZHMgRnJhbWV3b3JrQWRhcHRlciB8IEFkYXB0ZXJOYW1lcyA9IEZyYW1ld29ya0FkYXB0ZXIgfCBBZGFwdGVyTmFtZXMsXG4+KFxuICAgIGJvdDogQm90PEM+LFxuICAgIGFkYXB0ZXI6IEEsXG4gICAgd2ViaG9va09wdGlvbnM/OiBXZWJob29rT3B0aW9ucyxcbik6IChcbiAgICAuLi5hcmdzOiBQYXJhbWV0ZXJzPFJlc29sdmVOYW1lPEE+PlxuKSA9PiBSZXR1cm5UeXBlPFJlc29sdmVOYW1lPEE+PltcImhhbmRsZXJSZXR1cm5cIl0gZXh0ZW5kcyB1bmRlZmluZWRcbiAgICA/IFByb21pc2U8dm9pZD5cbiAgICA6IE5vbk51bGxhYmxlPFJldHVyblR5cGU8UmVzb2x2ZU5hbWU8QT4+W1wiaGFuZGxlclJldHVyblwiXT47XG5leHBvcnQgZnVuY3Rpb24gd2ViaG9va0NhbGxiYWNrPFxuICAgIEMgZXh0ZW5kcyBDb250ZXh0ID0gQ29udGV4dCxcbiAgICBBIGV4dGVuZHMgRnJhbWV3b3JrQWRhcHRlciB8IEFkYXB0ZXJOYW1lcyA9IEZyYW1ld29ya0FkYXB0ZXIgfCBBZGFwdGVyTmFtZXMsXG4+KFxuICAgIGJvdDogQm90PEM+LFxuICAgIGFkYXB0ZXI6IEEsXG4gICAgb25UaW1lb3V0PzogV2ViaG9va09wdGlvbnNbXCJvblRpbWVvdXRcIl0sXG4gICAgdGltZW91dE1pbGxpc2Vjb25kcz86IFdlYmhvb2tPcHRpb25zW1widGltZW91dE1pbGxpc2Vjb25kc1wiXSxcbiAgICBzZWNyZXRUb2tlbj86IFdlYmhvb2tPcHRpb25zW1wic2VjcmV0VG9rZW5cIl0sXG4pOiAoXG4gICAgLi4uYXJnczogUGFyYW1ldGVyczxSZXNvbHZlTmFtZTxBPj5cbikgPT4gUmV0dXJuVHlwZTxSZXNvbHZlTmFtZTxBPj5bXCJoYW5kbGVyUmV0dXJuXCJdIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgPyBQcm9taXNlPHZvaWQ+XG4gICAgOiBOb25OdWxsYWJsZTxSZXR1cm5UeXBlPFJlc29sdmVOYW1lPEE+PltcImhhbmRsZXJSZXR1cm5cIl0+O1xuZXhwb3J0IGZ1bmN0aW9uIHdlYmhvb2tDYWxsYmFjazxDIGV4dGVuZHMgQ29udGV4dCA9IENvbnRleHQ+KFxuICAgIGJvdDogQm90PEM+LFxuICAgIGFkYXB0ZXI6IEZyYW1ld29ya0FkYXB0ZXIgfCBBZGFwdGVyTmFtZXMgPSBkZWZhdWx0QWRhcHRlcixcbiAgICBvblRpbWVvdXQ/OlxuICAgICAgICB8IFdlYmhvb2tPcHRpb25zXG4gICAgICAgIHwgV2ViaG9va09wdGlvbnNbXCJvblRpbWVvdXRcIl0sXG4gICAgdGltZW91dE1pbGxpc2Vjb25kcz86IFdlYmhvb2tPcHRpb25zW1widGltZW91dE1pbGxpc2Vjb25kc1wiXSxcbiAgICBzZWNyZXRUb2tlbj86IFdlYmhvb2tPcHRpb25zW1wic2VjcmV0VG9rZW5cIl0sXG4pIHtcbiAgICBjb25zdCB7XG4gICAgICAgIG9uVGltZW91dDogdGltZW91dCA9IFwidGhyb3dcIixcbiAgICAgICAgdGltZW91dE1pbGxpc2Vjb25kczogbXMgPSAxMF8wMDAsXG4gICAgICAgIHNlY3JldFRva2VuOiB0b2tlbixcbiAgICB9ID0gdHlwZW9mIG9uVGltZW91dCA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG9uVGltZW91dFxuICAgICAgICA6IHsgb25UaW1lb3V0LCB0aW1lb3V0TWlsbGlzZWNvbmRzLCBzZWNyZXRUb2tlbiB9O1xuICAgIGxldCBpbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGNvbnN0IHNlcnZlcjogRnJhbWV3b3JrQWRhcHRlciA9IHR5cGVvZiBhZGFwdGVyID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gYWRhcHRlcnNbYWRhcHRlcl1cbiAgICAgICAgOiBhZGFwdGVyO1xuICAgIHJldHVybiBhc3luYyAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgY29uc3QgeyB1cGRhdGUsIHJlc3BvbmQsIHVuYXV0aG9yaXplZCwgZW5kLCBoYW5kbGVyUmV0dXJuLCBoZWFkZXIgfSA9XG4gICAgICAgICAgICBzZXJ2ZXIoLi4uYXJncyk7XG4gICAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIC8vIFdpbGwgZGVkdXBlIGNvbmN1cnJlbnRseSBpbmNvbWluZyBjYWxscyBmcm9tIHNldmVyYWwgdXBkYXRlc1xuICAgICAgICAgICAgYXdhaXQgYm90LmluaXQoKTtcbiAgICAgICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVhZGVyICE9PSB0b2tlbikge1xuICAgICAgICAgICAgYXdhaXQgdW5hdXRob3JpemVkKCk7XG4gICAgICAgICAgICAvLyBUT0RPOiBpbnZlc3RpZ2F0ZSBkZW5vIGJ1ZyB0aGF0IGhhcHBlbnMgd2hlbiB0aGlzIGNvbnNvbGUgbG9nZ2luZyBpcyByZW1vdmVkXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhoYW5kbGVyUmV0dXJuKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB1c2VkV2ViaG9va1JlcGx5ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHdlYmhvb2tSZXBseUVudmVsb3BlOiBXZWJob29rUmVwbHlFbnZlbG9wZSA9IHtcbiAgICAgICAgICAgIGFzeW5jIHNlbmQoanNvbikge1xuICAgICAgICAgICAgICAgIHVzZWRXZWJob29rUmVwbHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlc3BvbmQoanNvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aW1lb3V0SWZOZWNlc3NhcnkoXG4gICAgICAgICAgICBib3QuaGFuZGxlVXBkYXRlKGF3YWl0IHVwZGF0ZSwgd2ViaG9va1JlcGx5RW52ZWxvcGUpLFxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQgPT09IFwiZnVuY3Rpb25cIiA/ICgpID0+IHRpbWVvdXQoLi4uYXJncykgOiB0aW1lb3V0LFxuICAgICAgICAgICAgbXMsXG4gICAgICAgICk7XG4gICAgICAgIGlmICghdXNlZFdlYmhvb2tSZXBseSkgZW5kPy4oKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXR1cm47XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdGltZW91dElmTmVjZXNzYXJ5KFxuICAgIHRhc2s6IFByb21pc2U8dm9pZD4sXG4gICAgb25UaW1lb3V0OiBcInRocm93XCIgfCBcInJldHVyblwiIHwgKCgpID0+IHVua25vd24pLFxuICAgIHRpbWVvdXQ6IG51bWJlcixcbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aW1lb3V0ID09PSBJbmZpbml0eSkgcmV0dXJuIHRhc2s7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkZWJ1Z0VycihgUmVxdWVzdCB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0fSBtc2ApO1xuICAgICAgICAgICAgaWYgKG9uVGltZW91dCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgUmVxdWVzdCB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0fSBtc2ApKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvblRpbWVvdXQgPT09IFwiZnVuY3Rpb25cIikgb25UaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHRhc2suZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZiA9IERhdGUubm93KCkgLSBub3c7XG4gICAgICAgICAgICAgICAgZGVidWdFcnIoYFJlcXVlc3QgY29tcGxldGVkICR7ZGlmZn0gbXMgYWZ0ZXIgdGltZW91dCFgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgdGFzay50aGVuKHJlc29sdmUpXG4gICAgICAgICAgICAuY2F0Y2gocmVqZWN0KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gY2xlYXJUaW1lb3V0KGhhbmRsZSkpO1xuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdDQUF3QztBQUl4QyxTQUFTLFNBQVMsQ0FBQyxFQUFFLGNBQWMsUUFBUSxzQkFBc0I7QUFFakUsU0FDSSxZQUFZLGNBQWMsUUFFdkIsa0JBQWtCO0FBQ3pCLE1BQU0sV0FBVyxFQUFFO0FBRW5CLE1BQU0sa0JBQW9DLENBQ3RDLFFBQ0EsVUFDQSxRQUNBLGVBQWUsSUFBTSxTQUFTLGlCQUFpQixHQUM5QyxDQUFDO0lBQ0YsUUFBUSxRQUFRLE9BQU8sQ0FBQztJQUN4QixTQUFTO0lBQ1Q7SUFDQTtFQUNKLENBQUM7QUFDRCxNQUFNLFdBQVc7RUFBRSxHQUFHLGNBQWM7RUFBRSxVQUFVO0FBQWdCO0FBNERoRSxPQUFPLFNBQVMsZ0JBQ1osR0FBVyxFQUNYLFVBQTJDLGNBQWMsRUFDekQsU0FFaUMsRUFDakMsbUJBQTJELEVBQzNELFdBQTJDO0VBRTNDLE1BQU0sRUFDRixXQUFXLFVBQVUsT0FBTyxFQUM1QixxQkFBcUIsS0FBSyxNQUFNLEVBQ2hDLGFBQWEsS0FBSyxFQUNyQixHQUFHLE9BQU8sY0FBYyxXQUNuQixZQUNBO0lBQUU7SUFBVztJQUFxQjtFQUFZO0VBQ3BELElBQUksY0FBYztFQUNsQixNQUFNLFNBQTJCLE9BQU8sWUFBWSxXQUM5QyxRQUFRLENBQUMsUUFBUSxHQUNqQjtFQUNOLE9BQU8sT0FBTyxHQUFHO0lBQ2IsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLEdBQy9ELFVBQVU7SUFDZCxJQUFJLENBQUMsYUFBYTtNQUNkLCtEQUErRDtNQUMvRCxNQUFNLElBQUksSUFBSTtNQUNkLGNBQWM7SUFDbEI7SUFDQSxJQUFJLFdBQVcsT0FBTztNQUNsQixNQUFNO01BQ04sK0VBQStFO01BQy9FLFFBQVEsR0FBRyxDQUFDO01BQ1osT0FBTztJQUNYO0lBQ0EsSUFBSSxtQkFBbUI7SUFDdkIsTUFBTSx1QkFBNkM7TUFDL0MsTUFBTSxNQUFLLElBQUk7UUFDWCxtQkFBbUI7UUFDbkIsTUFBTSxRQUFRO01BQ2xCO0lBQ0o7SUFDQSxNQUFNLG1CQUNGLElBQUksWUFBWSxDQUFDLE1BQU0sUUFBUSx1QkFDL0IsT0FBTyxZQUFZLGFBQWEsSUFBTSxXQUFXLFFBQVEsU0FDekQ7SUFFSixJQUFJLENBQUMsa0JBQWtCO0lBQ3ZCLE9BQU87RUFDWDtBQUNKO0FBRUEsU0FBUyxtQkFDTCxJQUFtQixFQUNuQixTQUErQyxFQUMvQyxPQUFlO0VBRWYsSUFBSSxZQUFZLFVBQVUsT0FBTztFQUNqQyxPQUFPLElBQUksUUFBUSxDQUFDLFNBQVM7SUFDekIsTUFBTSxTQUFTLFdBQVc7TUFDdEIsU0FBUyxDQUFDLHdCQUF3QixFQUFFLFFBQVEsR0FBRyxDQUFDO01BQ2hELElBQUksY0FBYyxTQUFTO1FBQ3ZCLE9BQU8sSUFBSSxNQUFNLENBQUMsd0JBQXdCLEVBQUUsUUFBUSxHQUFHLENBQUM7TUFDNUQsT0FBTztRQUNILElBQUksT0FBTyxjQUFjLFlBQVk7UUFDckM7TUFDSjtNQUNBLE1BQU0sTUFBTSxLQUFLLEdBQUc7TUFDcEIsS0FBSyxPQUFPLENBQUM7UUFDVCxNQUFNLE9BQU8sS0FBSyxHQUFHLEtBQUs7UUFDMUIsU0FBUyxDQUFDLGtCQUFrQixFQUFFLEtBQUssa0JBQWtCLENBQUM7TUFDMUQ7SUFDSixHQUFHO0lBQ0gsS0FBSyxJQUFJLENBQUMsU0FDTCxLQUFLLENBQUMsUUFDTixPQUFPLENBQUMsSUFBTSxhQUFhO0VBQ3BDO0FBQ0oifQ==